"""
行动清单模板配置
包含每个行业的默认行动清单、每个决策的原因和忽视后果
"""

from typing import Dict, List, Literal

DecisionCode = Literal[
    "OBSERVE_PRE", "REGISTER_AUTONOMO", "STRONG_REGISTER_AUTONOMO",
    "OK_AUTONOMO", "RISK_AUTONOMO", "CONSIDER_SL",
    "OK_SL", "RISK_SL_LOW", "RISK_SL_HIGH"
]

# ========== 每个行业的默认行动清单（至少 6 条） ==========
DEFAULT_ACTIONS_BY_INDUSTRY: Dict[str, List[str]] = {
    # A. 零售/门店型
    "bazar": [
        "保存所有供应商发票（至少 4 年）",
        "建立商品进货登记册",
        "保留品牌商品授权证明或进货凭证",
        "定期核对库存与账目",
        "建立供应商清单：每个供应商对应发票/送货单/付款凭证存放位置",
        "对品牌/高风险 SKU 建立来源证明文件夹（授权/发票/合同）",
        "抽检商品标签（警示语/成分/CE/说明书）并拍照留档",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "supermarket": [
        "保存所有供应商发票（至少 4 年）",
        "建立商品进货登记册",
        "保留品牌商品授权证明或进货凭证",
        "定期核对库存与账目",
        "对高周转 SKU 建立'供货商-票据-标签'快速抽查清单",
        "库存与票据定期核对，避免长期差异",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "phone_shop": [
        "保留手机 IMEI 码记录",
        "记录买卖双方身份信息",
        "遵守数据保护规定",
        "建立售后服务体系",
        "维修/销售记录与收款对应留档（工单/收据/聊天记录）",
        "若留存客户信息：建立最小化留存与删除流程（RGPD）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "clothing_store": [
        "保存所有供应商发票（至少 4 年）",
        "建立商品进货登记册",
        "保留品牌商品授权证明或进货凭证",
        "定期核对库存与账目",
        "服装标签齐全（成分、洗涤说明）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "gift_shop": [
        "保存所有供应商发票（至少 4 年）",
        "建立商品进货登记册",
        "保留品牌商品授权证明或进货凭证",
        "定期核对库存与账目",
        "烟酒类商品需要特殊许可",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "pharmacy": [
        "获得药房经营许可（需专业资质）",
        "保存所有供应商发票（至少 4 年）",
        "建立药品进货登记册",
        "遵守药品存储和销售规定",
        "客户数据保护（RGPD）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "cosmetics_retail": [
        "保存所有供应商发票（至少 4 年）",
        "建立商品进货登记册",
        "保留品牌商品授权证明或进货凭证",
        "化妆品需要 CE 认证和成分标签",
        "定期核对库存与账目",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "stationery_shop": [
        "保存所有供应商发票（至少 4 年）",
        "建立商品进货登记册",
        "定期核对库存与账目",
        "打印服务需要遵守数据保护法",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    
    # B. 餐饮/食品
    "restaurant": [
        "获得食品卫生许可（Registro Sanitario）",
        "员工持有食品操作证（Manipulador de Alimentos）",
        "建立 HACCP 食品安全记录",
        "定期进行虫害防治并保留记录",
        "建立食品卫生自检记录（清洁/温度/过敏原/消毒）并留档",
        "检查紧急出口标识与应急灯维护记录（如适用）",
        "如有露台：核对许可范围与实际摆放一致",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "takeaway": [
        "获得食品卫生许可",
        "建立食品卫生记录",
        "遵守配送平台要求",
        "平台流水与开票/记账建立固定对账流程",
        "配送与食品包装合规要求做一次自检（如适用）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "bar": [
        "获得酒精销售许可证",
        "遵守市政营业时间规定",
        "设置噪音控制措施",
        "员工培训未成年人保护政策",
        "核对营业时间/噪音相关要求并留档（按所在城市）",
        "如有露台：核对许可与摆放范围，避免高频罚点",
        "应急灯与安全标识定期自检并保留维护凭证",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "bubble_tea_shop": [
        "获得食品卫生许可（Registro Sanitario）",
        "员工持有食品操作证（Manipulador de Alimentos）",
        "建立 HACCP 食品安全记录",
        "定期进行虫害防治并保留记录",
        "配料来源和标签合规",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "bakery": [
        "获得食品卫生许可（Registro Sanitario）",
        "员工持有食品操作证（Manipulador de Alimentos）",
        "建立 HACCP 食品安全记录",
        "定期进行虫害防治并保留记录",
        "原料来源和标签合规",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "food_processing": [
        "获得食品加工许可（需专业资质）",
        "建立 HACCP 食品安全记录",
        "遵守食品加工卫生规范",
        "废水处理和环境合规",
        "员工持有食品操作证",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    
    # C. 服务业/手艺型
    "electronics_repair": [
        "与授权回收公司签署协议",
        "保留废弃物回收凭证",
        "建立维修记录系统",
        "遵守消费者权益保护法（保修期）",
        "配件进货票据归档，减少来源解释压力",
        "电子废弃物交接正规回收并保留凭证（如适用）",
        "提供书面收据/保修条款降低纠纷概率",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "beauty": [
        "获得市政卫生许可",
        "使用合格的美容产品",
        "建立客户过敏反应记录",
        "保持清洁和消毒记录",
        "客户记录最小化留存并保护存储（避免散落在个人手机/聊天）",
        "使用产品的说明/成分/安全信息留档（如适用）",
        "工具消毒与卫生记录留档（降低投诉/检查风险）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "massage_spa": [
        "获得市政卫生许可",
        "使用合格的产品和工具",
        "建立客户过敏反应记录",
        "保持清洁和消毒记录",
        "客户数据保护（RGPD）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "tailoring": [
        "保留客户订单和收据",
        "建立维修/定制记录",
        "成本票据归档",
        "客户数据保护（如有）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "photography": [
        "客户数据保护（RGPD）",
        "建立服务合同和发票系统",
        "保留作品和客户记录",
        "成本票据归档",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "printing_advertising": [
        "客户数据保护（RGPD）",
        "建立服务合同和发票系统",
        "保留作品和客户记录",
        "成本票据归档",
        "遵守广告法规",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    
    # D. 平台/灵活就业
    "delivery": [
        "明确与平台的法律关系",
        "购买合适的商业保险",
        "保留配送记录和收入凭证",
        "建立收入与成本对账体系",
        "平台流水与收款记录留档，避免收入解释困难",
        "如长期高强度工作：确认保险覆盖与成本凭证完整",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "ride_sharing": [
        "明确与平台的法律关系",
        "购买合适的商业保险",
        "保留工作记录和收入凭证",
        "建立收入与成本对账体系",
        "车辆成本与用途解释",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "ecommerce": [
        "平台流水与申报一致",
        "保留订单和收款记录",
        "建立库存与账目对账",
        "客户数据保护（RGPD）",
        "成本票据归档",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "wechat_services": [
        "明确服务关系和合同",
        "保留订单和收款记录",
        "建立收入与成本对账体系",
        "客户数据保护（RGPD）",
        "成本票据归档",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "social_media": [
        "平台收入与申报一致",
        "保留合作合同和收款记录",
        "建立收入与成本对账体系",
        "客户数据保护（RGPD）",
        "成本票据归档",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    
    # E. 通信/技术/安装
    "telecom_agent": [
        "在 AEPD 注册数据处理活动",
        "制定并张贴隐私政策",
        "建立客户数据访问和删除流程",
        "员工签署数据保护保密协议",
        "客户身份证信息处理：禁止私聊转发/随意拍照留存，建立权限与删除流程",
        "张贴隐私说明（用途/保留期限/权利），并准备客户查询/删除流程",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "fiber_install": [
        "获得市政施工许可",
        "购买施工责任保险",
        "建立施工安全规范",
        "保留施工记录和客户签收",
        "如有分包：核对分包资质、保险与 PRL 记录，明确责任边界",
        "入户施工：保留客户授权/工单签收记录（争议时关键）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "it_outsourcing": [
        "在 AEPD 注册数据处理活动（如涉及客户数据）",
        "制定并张贴隐私政策",
        "建立客户数据访问和删除流程",
        "建立服务合同和发票系统",
        "员工签署数据保护保密协议",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "network_maintenance": [
        "获得市政施工许可（如需要）",
        "购买施工责任保险",
        "建立施工安全规范",
        "保留施工记录和客户签收",
        "客户数据保护（如有）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "pos_installation": [
        "获得市政施工许可（如需要）",
        "购买施工责任保险",
        "建立施工安全规范",
        "保留施工记录和客户签收",
        "客户数据保护（如有）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    
    # F. 建筑/劳务/体力型
    "construction": [
        "获得市政施工许可",
        "购买施工责任保险和 PRL 保险",
        "建立施工安全规范",
        "保留施工记录和客户签收",
        "分包商资质和保险齐全",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "construction_labor": [
        "获得市政施工许可",
        "购买施工责任保险和 PRL 保险",
        "建立施工安全规范",
        "保留施工记录和客户签收",
        "分包商资质和保险齐全",
        "用工合同和社保齐全",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "cleaning": [
        "购买商业保险和 PRL 保险",
        "建立服务合同和发票系统",
        "保留服务记录和客户签收",
        "用工合同和社保齐全（如有员工）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "moving_logistics": [
        "获得运输许可证",
        "购买商业保险",
        "建立服务合同和发票系统",
        "保留服务记录和客户签收",
        "车辆成本与用途解释",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "warehouse_loading": [
        "购买商业保险和 PRL 保险",
        "建立服务合同和发票系统",
        "保留服务记录和客户签收",
        "用工合同和社保齐全（如有员工）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    
    # G. 物流/运输
    "logistics_company": [
        "获得运输许可证",
        "购买商业保险",
        "建立服务合同和发票系统",
        "保留服务记录和客户签收",
        "车辆成本与用途解释",
        "海关事务需要专业资质和完整单据",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "freight_forwarding": [
        "获得运输许可证和海关代理资质",
        "购买商业保险",
        "建立服务合同和发票系统",
        "保留服务记录和客户签收",
        "海关事务需要专业资质和完整单据",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "courier_franchise": [
        "获得运输许可证",
        "购买商业保险",
        "建立服务合同和发票系统",
        "保留服务记录和客户签收",
        "车辆成本与用途解释",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "warehouse_storage": [
        "获得仓库许可",
        "购买商业保险",
        "建立服务合同和发票系统",
        "保留服务记录和客户签收",
        "遵守仓库安全规范",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    
    # H. 专业服务/公司型
    "advertising_company": [
        "客户数据保护（RGPD）",
        "建立服务合同和发票系统",
        "保留作品和客户记录",
        "成本票据归档",
        "遵守广告法规",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "consulting_company": [
        "客户数据保护（RGPD）",
        "建立服务合同和发票系统",
        "保留服务记录和客户记录",
        "成本票据归档",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "import_export": [
        "获得进出口许可和海关代理资质",
        "建立服务合同和发票系统",
        "保留服务记录和客户签收",
        "海关事务需要专业资质和完整单据",
        "客户数据保护（如有）",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "wholesale_company": [
        "保存所有供应商发票（至少 4 年）",
        "建立商品进货登记册",
        "保留品牌商品授权证明或进货凭证",
        "定期核对库存与账目",
        "建立服务合同和发票系统",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    "multi_location": [
        "每个门店都需要独立许可和保险",
        "保存所有供应商发票（至少 4 年）",
        "建立商品进货登记册",
        "保留品牌商品授权证明或进货凭证",
        "定期核对库存与账目",
        "用工合同和社保齐全",
        "每月做一次'流水 vs 记账/开票'对账并留档",
    ],
    
    # 兜底
    "other": [
        "了解您所在行业的具体法规要求",
        "保持完整的财务记录",
        "定期咨询税务和法律顾问",
        "每月做一次'流水 vs 记账/开票'对账并留档",
        "把合同/工单/聊天记录按客户或项目归档，便于解释收入来源",
        "准备一份'被检查时的资料清单'，确保 5 分钟内能找齐",
    ],
}


# ========== 每个决策代码的原因列表（至少 2 条） ==========
DEFAULT_REASONS_BY_DECISION: Dict[DecisionCode, List[str]] = {
    "OBSERVE_PRE": [
        "当前收入/规模信号不足以形成强注册压力",
        "尚未出现明显的用工/高可追溯收款触发点",
    ],
    "REGISTER_AUTONOMO": [
        "收入规模/经营持续性信号偏强",
        "存在可追溯收款或行业检查密度较高的特征",
    ],
    "STRONG_REGISTER_AUTONOMO": [
        "经营信号强（高收入/员工/高检查行业）已达到高风险区间",
        "收款可追溯性或记录缺失会迅速放大处罚风险",
    ],
    "OK_AUTONOMO": [
        "主要风险触发点较少或已被良好控制",
        "收入与经营规模暂未进入高压区间",
    ],
    "RISK_AUTONOMO": [
        "风险触发点数量/严重度上升",
        "收入/用工/收款可追溯性增强导致暴露面变大",
    ],
    "CONSIDER_SL": [
        "收入与经营复杂度上升（员工/外包/多业务线/责任链）",
        "风险暴露面扩大，需要更公司化的边界与流程",
    ],
    "OK_SL": [
        "核心风险触发点较少或已建立制度化流程",
        "公司化材料与对账逻辑较完整",
    ],
    "RISK_SL_LOW": [
        "出现多项可追溯风险点或制度执行不稳定",
        "部分材料链条不完整或记录缺失",
    ],
    "RISK_SL_HIGH": [
        "高严重度触发点数量较多（或出现 critical 组合触发）",
        "潜在罚款/纠纷/停业成本显著上升",
    ],
}


# ========== 每个决策代码的忽视后果列表（至少 2 条） ==========
DEFAULT_IGNORE_BY_DECISION: Dict[DecisionCode, List[str]] = {
    "OBSERVE_PRE": [
        "收入增长后才补材料，会导致解释成本变高",
        "票据链缺失会放大被抽查时的沟通压力",
    ],
    "REGISTER_AUTONOMO": [
        "持续经营但未注册可能带来补缴情形/罚款风险上升",
        "被抽查时无法证明成本与收入一致性，处罚概率更高",
    ],
    "STRONG_REGISTER_AUTONOMO": [
        "被检查或投诉时无法即时提供材料，极易触发罚款/停业/补缴",
        "用工不规范会引发额外的劳动/社保处罚风险",
    ],
    "OK_AUTONOMO": [
        "小问题长期不修复会积累成结构性差异",
        "票据不齐会导致未来扩张时风险突然上升",
    ],
    "RISK_AUTONOMO": [
        "被抽查时材料不足会显著增加罚款/补缴概率",
        "风险点叠加可能导致停业整顿或额外监管关注",
    ],
    "CONSIDER_SL": [
        "规模上升但结构未升级，会导致税务/劳动/责任风险同步放大",
        "纠纷或事故发生时个人责任暴露更高",
    ],
    "OK_SL": [
        "制度松动会造成账务与合同链断裂，后续修复成本高",
        "数据/用工档案缺失容易引发高额罚单或纠纷",
    ],
    "RISK_SL_LOW": [
        "制度缺口在检查/纠纷出现时会迅速变成罚款/诉讼风险",
        "账务与合同不一致会引发税务关注",
    ],
    "RISK_SL_HIGH": [
        "高额罚款与纠纷风险显著增加（尤其是用工与数据保护）",
        "严重情况下可能面临停业整顿或强制整改要求",
    ],
}

